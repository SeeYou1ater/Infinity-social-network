"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[744],{6744:function(t,s,e){e.r(s),e.d(s,{default:function(){return _}});var r=e(5671),a=e(3144),n=e(136),i=e(5716),o=e(2791),u=e(1009),p=e(885),l=e(184);var d=function(t){var s=(0,o.useState)(!1),e=(0,p.Z)(s,2),r=e[0],a=e[1],n=(0,o.useState)(t.status),i=(0,p.Z)(n,2),u=i[0],d=i[1];(0,o.useEffect)((function(){d(t.status)}),[t.status]);var c=function(){a(!0)};return(0,l.jsx)("div",{className:"status-wrapper",children:r?(0,l.jsx)("div",{className:"status-input",children:(0,l.jsx)("input",{onChange:function(t){d(t.currentTarget.value)},autoFocus:!0,onBlur:function(){a(!1),t.updateStatus(u)},value:u})}):(0,l.jsxs)("div",{className:"status",children:[(0,l.jsx)("span",{onDoubleClick:c,children:t.status||"No status"}),(0,l.jsx)("button",{onClick:c,children:"Change"})]})})};var c=function(t){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("img",{className:"photo",src:t.profile.photos.large||u,alt:"#"}),t.isOwner&&(0,l.jsx)("input",{type:"file",onChange:function(s){s.target.files.length&&t.savePhoto(s.target.files[0])}}),(0,l.jsx)(d,{status:t.status,updateStatus:t.updateStatus}),(0,l.jsx)("div",{className:"profile-description",children:"\u041a\u0430\u043a\u043e\u0435 \u0442\u043e \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0444\u0438\u043b\u044f"})]})},f=e(8687),h=e(6508),v=e(6139),m=e(704),j=e(1557),x=e(6130);var P=function(t){return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"post",children:t.message}),(0,l.jsxs)("div",{className:"likes",children:["Likes ",t.likes]})]})};var g=(0,j.B)(10),k=function(t){(0,n.Z)(e,t);var s=(0,i.Z)(e);function e(){return(0,r.Z)(this,e),s.apply(this,arguments)}return(0,a.Z)(e,[{key:"render",value:function(){return(0,l.jsxs)("form",{onSubmit:this.props.handleSubmit,children:[(0,l.jsx)(v.Z,{validate:[j.l,g],placeholder:"Enter!",component:x.N,formType:"textarea",type:"text",name:"post"}),(0,l.jsx)("button",{children:"Add post"})]})}}]),e}(o.Component),Z=(0,m.Z)({form:"addPost"})(k),N=function(t){var s=t.posts.map((function(t){return(0,l.jsx)(P,{message:t.message,likes:t.likes})}));return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"posts",children:["My posts",(0,l.jsx)(Z,{onSubmit:function(s){t.addPost(s.post)}})]}),s]})},S=function(t){(0,n.Z)(e,t);var s=(0,i.Z)(e);function e(){return(0,r.Z)(this,e),s.apply(this,arguments)}return(0,a.Z)(e,[{key:"render",value:function(){return(0,l.jsx)("div",{children:(0,l.jsx)(N,{posts:this.props.posts,addPost:this.props.addPost})})}}]),e}(o.Component),y=(0,f.$j)((function(t){return{posts:t.dataProfile.dataPosts}}),(function(t){return{addPost:function(s){t((0,h.Ai)(s))}}}))(S),C=e(693);var b=function(t){return t.dataProfile.profile?(0,l.jsxs)("div",{className:"App__profile",children:[(0,l.jsx)(c,{savePhoto:t.savePhoto,isOwner:t.isOwner,profile:t.dataProfile.profile,status:t.status,updateStatus:t.updateStatus}),(0,l.jsx)(y,{dataProfile:t.dataProfile})]}):(0,l.jsx)(C.Z,{})},A=e(5628),U=e(7781),I=e(6871),w=function(t){(0,n.Z)(e,t);var s=(0,i.Z)(e);function e(){return(0,r.Z)(this,e),s.apply(this,arguments)}return(0,a.Z)(e,[{key:"refreshPage",value:function(){var t=this.props.router.params.profileId;t||(t=this.props.authorizedUserId),this.props.setUserProfile(t),this.props.setUserStatus(t)}},{key:"componentDidMount",value:function(){this.refreshPage()}},{key:"componentDidUpdate",value:function(t,s,e){t.router.params.profileId!==this.props.router.params.profileId&&this.refreshPage()}},{key:"render",value:function(){return null===this.props.authorizedUserId?(0,l.jsx)(I.Fg,{to:"/login"}):(0,l.jsx)("div",{className:"App__profile",children:(0,l.jsx)(b,{dataProfile:this.props.dataProfile,isOwner:Number(this.props.router.params.profileId)===this.props.authorizedUserId,savePhoto:this.props.savePhoto,isAuth:this.props.isAuth,status:this.props.status,updateStatus:this.props.updateStatus})})}}]),e}(o.Component),_=(0,U.qC)((0,f.$j)((function(t){return{dataProfile:t.dataProfile,status:t.dataProfile.status,authorizedUserId:t.auth.id,isAuth:t.auth.isAuth}}),(function(t){return{setUserProfile:function(s){t((0,h.nA)(s))},setUserStatus:function(s){t((0,h.gY)(s))},updateStatus:function(s){t((0,h.NN)(s))},savePhoto:function(s){t((0,h.m2)(s))}}})),A.E)(w)}}]);
//# sourceMappingURL=744.d4b025a7.chunk.js.map